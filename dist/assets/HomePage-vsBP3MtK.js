import{j as s,L as u,u as m,r as d,G as p}from"./index-B_7VeGgU.js";import{P as x,g}from"./productApi-DoSkOfiM.js";import{E as h}from"./EmptyState-CHFLAYQf.js";import{A as j}from"./ApiError-bnzA-mkx.js";import"./errorMessages-JRjuVPVt.js";function f({product:e}){return s.jsxs(u,{to:`/products/${e.id}`,className:"product-card",children:[s.jsx("div",{className:"product-image",children:s.jsx(x,{size:"small"})}),s.jsxs("div",{className:"product-info",children:[s.jsx("h3",{className:"product-name",children:e.name}),s.jsxs("p",{className:"product-price",children:["$",e.price]})]})]})}function P({products:e}){return s.jsx("div",{className:"product-grid",children:e.map(a=>s.jsx(f,{product:a},a.id))})}function N({page:e=1,limit:a=30}={}){const{data:t,error:r,isLoading:c}=m(["products",{page:e,limit:a}],([o,n])=>g(n),{revalidateOnFocus:!1,dedupingInterval:2e3,revalidateOnReconnect:!0,keepPreviousData:!0});return{products:(t==null?void 0:t.items)||[],total:(t==null?void 0:t.total)||0,totalPages:t!=null&&t.total?Math.ceil(t.total/a):0,loading:c,error:(r==null?void 0:r.message)||null}}function k(){const[e,a]=d.useState(1),t=30,{products:r,total:c,totalPages:o,loading:n,error:i}=N({page:e,limit:t});return d.useEffect(()=>{window.scrollTo({top:0,behavior:"smooth"})},[e]),s.jsxs("div",{className:"page container",children:[s.jsx("h2",{children:"Products"}),s.jsxs("p",{className:"api-label",children:["API: GET /api/v1/products â€¢ ",c," items â€¢ Page ",e," of ",o]}),n&&s.jsx(p,{count:8}),!n&&i&&s.jsx(j,{error:i,endpoint:"GET /api/v1/products"}),!n&&!i&&r.length===0&&s.jsx(h,{message:"No products available",icon:"ðŸ“¦"}),!n&&!i&&r.length>0&&s.jsxs(s.Fragment,{children:[s.jsx(P,{products:r}),s.jsxs("div",{className:"pagination-controls",style:{display:"flex",justifyContent:"center",gap:"1rem",marginTop:"2rem"},children:[s.jsx("button",{disabled:e===1,onClick:()=>a(l=>Math.max(1,l-1)),className:"btn btn-secondary",children:"Previous"}),s.jsxs("span",{style:{alignSelf:"center"},children:["Page ",e," of ",o]}),s.jsx("button",{disabled:e>=o,onClick:()=>a(l=>l+1),className:"btn btn-secondary",children:"Next"})]})]}),s.jsxs("details",{className:"api-debug",children:[s.jsx("summary",{children:"API Response"}),s.jsx("pre",{children:JSON.stringify(r,null,2)})]})]})}export{k as default};
